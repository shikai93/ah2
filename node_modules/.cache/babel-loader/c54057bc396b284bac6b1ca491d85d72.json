{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shikai.ng\\\\Desktop\\\\ah2\\\\src\\\\Components\\\\Attendance\\\\Attendance.js\";\nimport React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport { Container, Row, Col, Button, Form } from 'react-bootstrap';\nimport AttendanceAPI from \"../../Helpers/Attendance/AttendanceAPI.js\";\nimport Messages from '../../Helpers/messages/MessageRenderer.js';\nimport QrReader from 'react-qr-reader';\nimport { JSDateToHTMLDateString } from \"../../Helpers/Helper.js\";\n\nclass Attendance extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.toHome = () => {\n      this.props.history.push(\"/\");\n    };\n\n    this.saveAttendance = () => {\n      this.attendanceAPI.LogAttendance(this.state.attendanceDate, this.state.attendees, success => {\n        if (success) {\n          this.toHome();\n        } else {\n          var newState = this.state;\n          newState.messages = [\"Error saving attendance\"];\n          this.setState(newState);\n        }\n      });\n    };\n\n    this.handleScan = data => {\n      if (data) {\n        let oldState = this.state;\n        oldState.attendees.push(data);\n        oldState.qrON = false;\n        this.setState(oldState);\n      }\n    };\n\n    this.handleError = err => {\n      console.error(err);\n    };\n\n    this.renderReader = () => {\n      if (this.state.qrON) {\n        return React.createElement(QrReader, {\n          delay: 500,\n          style: {\n            width: '100%'\n          },\n          onError: this.handleError,\n          onScan: this.handleScan,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        });\n      } else {\n        return;\n      }\n    };\n\n    this.addAttendee = () => {\n      var oldState = this.state;\n      oldState.qrON = true;\n      this.setState(oldState);\n    };\n\n    this.removeAttendee = event => {\n      var oldState = this.state;\n      let id = event.target.dataset.id;\n      oldState.attendees.splice(id, 1);\n      this.setState(oldState);\n    };\n\n    this.renderAttendees = () => {\n      var attendeeElms = [];\n\n      for (var i = 0; i < this.state.attendees.length; i++) {\n        var attendee = this.state.attendees[i];\n        attendeeElms.push(React.createElement(Row, {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(Col, {\n          xs: 6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, attendee), React.createElement(Col, {\n          xs: 6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(Button, {\n          variant: \"danger\",\n          \"data-id\": i,\n          onClick: this.removeAttendee,\n          style: {\n            borderRadius: \"50%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, \"-\"))));\n      }\n\n      return attendeeElms;\n    };\n\n    var initDate = new Date();\n    this.state = {\n      attendanceDate: initDate,\n      attendees: [],\n      messages: [],\n      qrON: false\n    };\n    this.attendanceAPI = new AttendanceAPI();\n  }\n\n  handleDataChange(event, dataFieldAffected = null, val = null) {\n    if (event !== undefined) {\n      dataFieldAffected = event.target.dataset.datafield;\n      val = event.target.value;\n    }\n\n    let oldState = this.state;\n\n    switch (dataFieldAffected) {\n      case \"attendanceDate\":\n        oldState.attendanceDate = val;\n        break;\n\n      default:\n        break;\n    }\n\n    this.setState(oldState);\n  } // MARK : QR reader\n\n\n  render() {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Messages, {\n      messages: this.state.messages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Row, {\n      style: {\n        marginBottom: '30px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Col, {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Take Attendance\"))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 12,\n      sm: {\n        span: 10,\n        offset: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"formDate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Form.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 4,\n      xl: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Attendace Date : \")), React.createElement(Col, {\n      xs: 8,\n      xl: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"date\",\n      min: \"1990\",\n      \"data-datafield\": \"attendanceDate\",\n      onChange: this.handleDataChange.bind(this),\n      defaultValue: JSDateToHTMLDateString(this.state.attendanceDate),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }))))), React.createElement(Row, {\n      className: \"align-items-center\",\n      style: {\n        paddingTop: \"10px\",\n        paddingBottom: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: {\n        span: 8,\n        offset: 2\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, this.renderAttendees())), React.createElement(Row, {\n      className: \"align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, this.renderReader()), React.createElement(Col, {\n      xs: 2,\n      style: {\n        textAlign: \"right\",\n        alignItems: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"info\",\n      onClick: this.addAttendee,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"+\"))))), React.createElement(Row, {\n      style: {\n        marginTop: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 12,\n      sm: {\n        span: 10,\n        offset: 1\n      },\n      style: {\n        textAlign: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.toHome,\n      style: {\n        margin: \"0 10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Home\"), React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.saveAttendance,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Save\"))));\n  }\n\n}\n\nexport default withRouter(Attendance);","map":{"version":3,"sources":["C:/Users/shikai.ng/Desktop/ah2/src/Components/Attendance/Attendance.js"],"names":["React","withRouter","Container","Row","Col","Button","Form","AttendanceAPI","Messages","QrReader","JSDateToHTMLDateString","Attendance","Component","constructor","props","context","toHome","history","push","saveAttendance","attendanceAPI","LogAttendance","state","attendanceDate","attendees","success","newState","messages","setState","handleScan","data","oldState","qrON","handleError","err","console","error","renderReader","width","addAttendee","removeAttendee","event","id","target","dataset","splice","renderAttendees","attendeeElms","i","length","attendee","borderRadius","initDate","Date","handleDataChange","dataFieldAffected","val","undefined","datafield","value","render","marginBottom","textAlign","span","offset","bind","paddingTop","paddingBottom","alignItems","marginTop","margin"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Container, Row, Col, Button, Form} from 'react-bootstrap'\r\nimport AttendanceAPI from \"../../Helpers/Attendance/AttendanceAPI.js\"\r\nimport Messages from '../../Helpers/messages/MessageRenderer.js'\r\nimport QrReader from 'react-qr-reader'\r\nimport { JSDateToHTMLDateString } from \"../../Helpers/Helper.js\"\r\nclass Attendance extends React.Component { \r\n    constructor(props, context) {\r\n        super(props, context)\r\n        var initDate = new Date()\r\n        this.state={ \r\n            attendanceDate : initDate,\r\n            attendees : [],\r\n            messages : [],\r\n            qrON : false\r\n        };\r\n        this.attendanceAPI = new AttendanceAPI()\r\n    }\r\n    toHome = () => {\r\n        this.props.history.push(\"/\");\r\n    }\r\n    saveAttendance = () => {\r\n        this.attendanceAPI.LogAttendance(this.state.attendanceDate, this.state.attendees, (success) => {\r\n            if (success) {\r\n                this.toHome()\r\n            } else {\r\n                var newState = this.state\r\n                newState.messages = [\"Error saving attendance\"]\r\n                this.setState(newState)\r\n            }\r\n        })\r\n    }\r\n    \r\n    handleDataChange(event, dataFieldAffected = null, val = null) {\r\n        if (event !== undefined) {\r\n            dataFieldAffected = event.target.dataset.datafield\r\n            val = event.target.value\r\n        }\r\n        let oldState = this.state;\r\n        switch (dataFieldAffected) {    \r\n            case \"attendanceDate\" :\r\n                oldState.attendanceDate = val\r\n                break\r\n            default :\r\n                break\r\n        }\r\n        this.setState(oldState)\r\n    }\r\n\r\n    // MARK : QR reader\r\n    handleScan = data => {\r\n        if (data) {\r\n            let oldState = this.state;\r\n            oldState.attendees.push(data);\r\n            oldState.qrON = false;\r\n            this.setState(oldState)\r\n        }\r\n    }\r\n    handleError = err => {\r\n        console.error(err)\r\n    }\r\n    renderReader = () => {\r\n        if (this.state.qrON) {\r\n            return (\r\n                <QrReader\r\n                    delay={500}\r\n                    style={{ width: '100%' }}\r\n                    onError={this.handleError}\r\n                    onScan={this.handleScan}\r\n                    />)\r\n        } else {\r\n            return\r\n        }\r\n    }\r\n\r\n    // MARK : Handle Attendees\r\n    addAttendee = () => {\r\n        var oldState = this.state\r\n        oldState.qrON = true\r\n        this.setState(oldState)\r\n    }\r\n    removeAttendee = (event) =>{\r\n        var oldState = this.state\r\n        let id = event.target.dataset.id;\r\n        oldState.attendees.splice(id,1)\r\n        this.setState(oldState)\r\n    }\r\n    renderAttendees = () => {\r\n        var attendeeElms = []\r\n        for (var i=0; i < this.state.attendees.length; i++) {\r\n            var attendee = this.state.attendees[i]\r\n            attendeeElms.push(\r\n                <Row key={i}>\r\n                    <Col xs={6}>\r\n                        {attendee}\r\n                    </Col>\r\n                    <Col xs={6}>\r\n                        <Button variant=\"danger\" data-id={i} onClick={this.removeAttendee} style={{borderRadius : \"50%\"}}>-</Button>\r\n                    </Col>\r\n                </Row>\r\n            )\r\n        }\r\n        return attendeeElms\r\n    }\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Messages messages={this.state.messages}></Messages>\r\n                <Row style={{marginBottom : '30px'}}>\r\n                    <Col style={{textAlign : 'center'}}>\r\n                        <h1>Take Attendance</h1>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col xs={12} sm={{span : 10, offset : 1}}>\r\n                        <Form>\r\n                            <Form.Group controlId=\"formDate\" >\r\n                            <Form.Row>\r\n                                <Col xs={4} xl={2}>\r\n                                    <Form.Label>Attendace Date : </Form.Label>\r\n                                </Col>\r\n                                <Col xs={8} xl={10}>\r\n                                    <Form.Control type=\"date\" min=\"1990\"\r\n                                     data-datafield =\"attendanceDate\"\r\n                                     onChange={this.handleDataChange.bind(this)}  \r\n                                     defaultValue={JSDateToHTMLDateString(this.state.attendanceDate)}>\r\n                                    </Form.Control>\r\n                                </Col>\r\n                            </Form.Row>\r\n                            </Form.Group>\r\n                        </Form>\r\n                        <Row className=\"align-items-center\" style={{paddingTop : \"10px\", paddingBottom : \"20px\"}}>\r\n                            <Col xs={{span : 8, offset : 2}}>\r\n                                {this.renderAttendees()}\r\n                            </Col>\r\n                        </Row>\r\n                        <Row className=\"align-items-center\"  >\r\n                            <Col xs={10}>\r\n                                {this.renderReader()}\r\n                            </Col>\r\n                            <Col xs={2} style={{textAlign : \"right\", alignItems : \"center\"}}>\r\n                                <Button variant=\"info\" onClick={this.addAttendee}>+</Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n                <Row style={{marginTop : \"20px\"}}>\r\n                    <Col xs={12} sm={{span : 10, offset : 1}} style={{textAlign : \"right\"}}>\r\n                        <Button variant=\"secondary\" onClick={this.toHome} style={{margin : \"0 10px\"}}>Home</Button>\r\n                        <Button variant=\"primary\" onClick={this.saveAttendance}>Save</Button>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(Attendance);"]},"metadata":{},"sourceType":"module"}