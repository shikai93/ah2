{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shikai.ng\\\\Desktop\\\\ah2\\\\src\\\\Components\\\\Attendance\\\\Attendance.js\";\nimport React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport { Container, Row, Col, Button, Form } from 'react-bootstrap';\nimport AttendanceAPI from \"../../Helpers/Attendance/AttendanceAPI.js\";\nimport Messages from '../../Helpers/messages/MessageRenderer.js';\nimport QrReader from 'react-qr-reader';\nimport { JSDateToHTMLDateString } from \"../../Helpers/Helper.js\";\n\nclass Attendance extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.toHome = () => {\n      this.props.history.push(\"/\");\n    };\n\n    this.saveAttendance = () => {\n      if (this.state.meeting === '') {\n        alert(\"Please enter meeting name\");\n        return;\n      }\n\n      if (this.state.attendees.length === 0) {\n        alert(\"Please enter at least 1 attendee\");\n        return;\n      }\n\n      this.attendanceAPI.LogAttendance(this.state.attendanceDate, this.state.attendees, this.state.meeting, success => {\n        if (success) {\n          this.toHome();\n        } else {\n          var newState = this.state;\n          newState.messages = [\"Error saving attendance\"];\n          this.setState(newState);\n        }\n      });\n    };\n\n    this.handleScan = data => {\n      if (data) {\n        let oldState = this.state;\n        oldState.attendees.push(data);\n        oldState.qrON = false;\n        this.setState(oldState);\n      }\n    };\n\n    this.handleError = err => {\n      console.error(err);\n    };\n\n    this.renderReader = () => {\n      if (this.state.qrON) {\n        return React.createElement(QrReader, {\n          delay: 500,\n          style: {\n            width: '100%'\n          },\n          onError: this.handleError,\n          onScan: this.handleScan,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        });\n      } else {\n        return;\n      }\n    };\n\n    this.addAttendee = () => {\n      var oldState = this.state;\n      oldState.qrON = true;\n      this.setState(oldState);\n    };\n\n    this.removeAttendee = event => {\n      var oldState = this.state;\n      let id = event.target.dataset.id;\n      oldState.attendees.splice(id, 1);\n      this.setState(oldState);\n    };\n\n    this.renderAttendees = () => {\n      var attendeeElms = [];\n\n      for (var i = 0; i < this.state.attendees.length; i++) {\n        var attendee = this.state.attendees[i];\n        attendeeElms.push(React.createElement(Row, {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(Col, {\n          xs: 6,\n          style: {\n            display: \"flex\",\n            alignItems: \"center\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, attendee)), React.createElement(Col, {\n          xs: 6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(Button, {\n          variant: \"danger\",\n          \"data-id\": i,\n          onClick: this.removeAttendee,\n          style: {\n            borderRadius: \"50%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \"-\"))));\n      }\n\n      return attendeeElms;\n    };\n\n    var initDate = new Date();\n    this.state = {\n      attendanceDate: initDate,\n      meeting: '',\n      attendees: [],\n      messages: [],\n      qrON: false\n    };\n    this.attendanceAPI = new AttendanceAPI();\n  }\n\n  handleDataChange(event, dataFieldAffected = null, val = null) {\n    if (event !== undefined) {\n      dataFieldAffected = event.target.dataset.datafield;\n      val = event.target.value;\n    }\n\n    let oldState = this.state;\n\n    switch (dataFieldAffected) {\n      case \"attendanceDate\":\n        oldState.attendanceDate = val;\n        break;\n\n      case \"meeting\":\n        oldState.meeting = val;\n        break;\n\n      default:\n        break;\n    }\n\n    this.setState(oldState);\n  } // MARK : QR reader\n\n\n  render() {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Messages, {\n      messages: this.state.messages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(Row, {\n      style: {\n        marginBottom: '30px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Col, {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Take Attendance\"))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 12,\n      sm: {\n        span: 10,\n        offset: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"formDate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Form.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 4,\n      xl: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Attendace Date : \")), React.createElement(Col, {\n      xs: 8,\n      xl: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"date\",\n      min: \"1990\",\n      \"data-datafield\": \"attendanceDate\",\n      onChange: this.handleDataChange.bind(this),\n      defaultValue: JSDateToHTMLDateString(this.state.attendanceDate),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    })))), React.createElement(Form.Group, {\n      controlId: \"formMeeting\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Form.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 4,\n      xl: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Meeting : \")), React.createElement(Col, {\n      xs: 8,\n      xl: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"text\",\n      \"data-datafield\": \"meeting\",\n      onChange: this.handleDataChange.bind(this),\n      defaultValue: this.state.meeting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }))))), React.createElement(Row, {\n      className: \"align-items-center\",\n      style: {\n        paddingTop: \"10px\",\n        paddingBottom: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: {\n        span: 8,\n        offset: 2\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, this.renderAttendees())), React.createElement(Row, {\n      className: \"align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, this.renderReader()), React.createElement(Col, {\n      xs: 2,\n      style: {\n        textAlign: \"right\",\n        alignItems: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"info\",\n      onClick: this.addAttendee,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"+\"))))), React.createElement(Row, {\n      style: {\n        marginTop: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 12,\n      sm: {\n        span: 10,\n        offset: 1\n      },\n      style: {\n        textAlign: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.toHome,\n      style: {\n        margin: \"0 10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Home\"), React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.saveAttendance,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Save\"))));\n  }\n\n}\n\nexport default withRouter(Attendance);","map":{"version":3,"sources":["C:/Users/shikai.ng/Desktop/ah2/src/Components/Attendance/Attendance.js"],"names":["React","withRouter","Container","Row","Col","Button","Form","AttendanceAPI","Messages","QrReader","JSDateToHTMLDateString","Attendance","Component","constructor","props","context","toHome","history","push","saveAttendance","state","meeting","alert","attendees","length","attendanceAPI","LogAttendance","attendanceDate","success","newState","messages","setState","handleScan","data","oldState","qrON","handleError","err","console","error","renderReader","width","addAttendee","removeAttendee","event","id","target","dataset","splice","renderAttendees","attendeeElms","i","attendee","display","alignItems","borderRadius","initDate","Date","handleDataChange","dataFieldAffected","val","undefined","datafield","value","render","marginBottom","textAlign","span","offset","bind","paddingTop","paddingBottom","marginTop","margin"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Container, Row, Col, Button, Form} from 'react-bootstrap'\r\nimport AttendanceAPI from \"../../Helpers/Attendance/AttendanceAPI.js\"\r\nimport Messages from '../../Helpers/messages/MessageRenderer.js'\r\nimport QrReader from 'react-qr-reader'\r\nimport { JSDateToHTMLDateString } from \"../../Helpers/Helper.js\"\r\nclass Attendance extends React.Component { \r\n    constructor(props, context) {\r\n        super(props, context)\r\n        var initDate = new Date()\r\n        this.state={ \r\n            attendanceDate : initDate,\r\n            meeting : '',\r\n            attendees : [],\r\n            messages : [],\r\n            qrON : false\r\n        };\r\n        this.attendanceAPI = new AttendanceAPI()\r\n    }\r\n    toHome = () => {\r\n        this.props.history.push(\"/\");\r\n    }\r\n    saveAttendance = () => {\r\n        if (this.state.meeting === '') {\r\n            alert (\"Please enter meeting name\")\r\n            return\r\n        }\r\n        if (this.state.attendees.length === 0) {\r\n            alert(\"Please enter at least 1 attendee\")\r\n            return\r\n        }\r\n        this.attendanceAPI.LogAttendance(this.state.attendanceDate, this.state.attendees, this.state.meeting, (success) => {\r\n            if (success) {\r\n                this.toHome()\r\n            } else {\r\n                var newState = this.state\r\n                newState.messages = [\"Error saving attendance\"]\r\n                this.setState(newState)\r\n            }\r\n        })\r\n    }\r\n    \r\n    handleDataChange(event, dataFieldAffected = null, val = null) {\r\n        if (event !== undefined) {\r\n            dataFieldAffected = event.target.dataset.datafield\r\n            val = event.target.value\r\n        }\r\n        let oldState = this.state;\r\n        switch (dataFieldAffected) {    \r\n            case \"attendanceDate\" :\r\n                oldState.attendanceDate = val\r\n                break\r\n            case \"meeting\" :\r\n                oldState.meeting = val\r\n                break\r\n            default :\r\n                break\r\n        }\r\n        this.setState(oldState)\r\n    }\r\n\r\n    // MARK : QR reader\r\n    handleScan = data => {\r\n        if (data) {\r\n            let oldState = this.state;\r\n            oldState.attendees.push(data);\r\n            oldState.qrON = false;\r\n            this.setState(oldState)\r\n        }\r\n    }\r\n    handleError = err => {\r\n        console.error(err)\r\n    }\r\n    renderReader = () => {\r\n        if (this.state.qrON) {\r\n            return (\r\n                <QrReader\r\n                    delay={500}\r\n                    style={{ width: '100%' }}\r\n                    onError={this.handleError}\r\n                    onScan={this.handleScan}\r\n                    />)\r\n        } else {\r\n            return\r\n        }\r\n    }\r\n\r\n    // MARK : Handle Attendees\r\n    addAttendee = () => {\r\n        var oldState = this.state\r\n        oldState.qrON = true\r\n        this.setState(oldState)\r\n    }\r\n    removeAttendee = (event) =>{\r\n        var oldState = this.state\r\n        let id = event.target.dataset.id;\r\n        oldState.attendees.splice(id,1)\r\n        this.setState(oldState)\r\n    }\r\n    renderAttendees = () => {\r\n        var attendeeElms = []\r\n        for (var i=0; i < this.state.attendees.length; i++) {\r\n            var attendee = this.state.attendees[i]\r\n            attendeeElms.push(\r\n                <Row key={i}>\r\n                    <Col xs={6} style ={{display: \"flex\", alignItems: \"center\"}}>\r\n                        <div>{attendee}</div>\r\n                    </Col>\r\n                    <Col xs={6}>\r\n                        <Button variant=\"danger\" data-id={i} onClick={this.removeAttendee} style={{borderRadius : \"50%\"}}>-</Button>\r\n                    </Col>\r\n                </Row>\r\n            )\r\n        }\r\n        return attendeeElms\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Messages messages={this.state.messages}></Messages>\r\n                <Row style={{marginBottom : '30px'}}>\r\n                    <Col style={{textAlign : 'center'}}>\r\n                        <h1>Take Attendance</h1>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col xs={12} sm={{span : 10, offset : 1}}>\r\n                        <Form>\r\n                            <Form.Group controlId=\"formDate\" >\r\n                            <Form.Row>\r\n                                <Col xs={4} xl={2}>\r\n                                    <Form.Label>Attendace Date : </Form.Label>\r\n                                </Col>\r\n                                <Col xs={8} xl={10}>\r\n                                    <Form.Control type=\"date\" min=\"1990\"\r\n                                     data-datafield =\"attendanceDate\"\r\n                                     onChange={this.handleDataChange.bind(this)}  \r\n                                     defaultValue={JSDateToHTMLDateString(this.state.attendanceDate)}>\r\n                                    </Form.Control>\r\n                                </Col>\r\n                            </Form.Row>\r\n                            </Form.Group>\r\n                            <Form.Group controlId=\"formMeeting\" >\r\n                            <Form.Row>\r\n                                <Col xs={4} xl={2}>\r\n                                    <Form.Label>Meeting : </Form.Label>\r\n                                </Col>\r\n                                <Col xs={8} xl={10}>\r\n                                    <Form.Control type=\"text\"\r\n                                     data-datafield =\"meeting\"\r\n                                     onChange={this.handleDataChange.bind(this)}  \r\n                                     defaultValue={this.state.meeting}>\r\n                                    </Form.Control>\r\n                                </Col>\r\n                            </Form.Row>\r\n                            </Form.Group>\r\n                        </Form>\r\n                        <Row className=\"align-items-center\" style={{paddingTop : \"10px\", paddingBottom : \"20px\"}}>\r\n                            <Col xs={{span : 8, offset : 2}}>\r\n                                {this.renderAttendees()}\r\n                            </Col>\r\n                        </Row>\r\n                        <Row className=\"align-items-center\">\r\n                            <Col xs={10}>\r\n                                {this.renderReader()}\r\n                            </Col>\r\n                            <Col xs={2} style={{textAlign : \"right\", alignItems : \"center\"}}>\r\n                                <Button variant=\"info\" onClick={this.addAttendee}>+</Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n                <Row style={{marginTop : \"20px\"}}>\r\n                    <Col xs={12} sm={{span : 10, offset : 1}} style={{textAlign : \"right\"}}>\r\n                        <Button variant=\"secondary\" onClick={this.toHome} style={{margin : \"0 10px\"}}>Home</Button>\r\n                        <Button variant=\"primary\" onClick={this.saveAttendance}>Save</Button>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(Attendance);"]},"metadata":{},"sourceType":"module"}